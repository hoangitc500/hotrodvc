<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="C·ªïng th√¥ng tin h·ªó tr·ª£ H·ªá th·ªëng th√¥ng tin Gi·∫£i quy·∫øt TTHC B·ªô ng√†nh c·ªßa VNPT tri·ªÉn khai">
    <meta name="author" content="ƒê·ªó Vi·ªát Ho√†ng - VNPT Ninh B√¨nh">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hoangitc500.github.io/hotrodvc/">
    <meta property="og:title" content="C·ªïng th√¥ng tin H·ªó tr·ª£ HTTT GQ TTHC B·ªô ng√†nh">
    <meta property="og:description" content="Tra c·ª©u nhanh t√†i li·ªáu HDSD, tham gia nh√≥m Zalo h·ªó tr·ª£ v√† g·ª≠i y√™u c·∫ßu k·ªπ thu·∫≠t cho 07 B·ªô ng√†nh.">
    <meta property="og:image" content="https://hoangitc500.github.io/hotrodvc/thumbnail.png">
    
    <link rel="icon" href="favicon-vnpt.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon-vnpt.ico" type="image/x-icon">
    
    <title>C·ªïng th√¥ng tin H·ªó tr·ª£ HTTT GQ TTHC B·ªô ng√†nh</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. C·∫§U H√åNH GIAO DI·ªÜN CHUNG --- */
        :root {
            --primary: #0068ff;
            --danger: #ef4444;
            --text-dark: #1e293b;
            --text-gray: #64748b;
        }

        * { box-sizing: border-box; outline: none; }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0; padding: 40px 20px;
            color: var(--text-dark);
            line-height: 1.5;
            min-height: 100vh;
            background-color: #f0f9ff;
            background-image: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,0) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,0) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,0) 0, transparent 50%);
            background: 
                radial-gradient(at 0% 0%, hsla(215,98%,61%,0.15) 0px, transparent 50%),
                radial-gradient(at 100% 0%, hsla(250,100%,70%,0.1) 0px, transparent 50%),
                radial-gradient(at 100% 100%, hsla(189,100%,56%,0.1) 0px, transparent 50%),
                radial-gradient(at 0% 100%, hsla(340,100%,76%,0.1) 0px, transparent 50%);
            background-attachment: fixed;
            background-size: cover;
        }

        .container {
            max-width: 1200px; margin: 0 auto;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: 24px;
            box-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.15);
            overflow: hidden; 
        }

        /* --- HEADER --- */
        .header {
            padding: 40px 20px; text-align: center;
            background: transparent;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .brand-logos { display: flex; justify-content: center; align-items: center; gap: 25px; margin-bottom: 20px; }
        .coat-of-arms { height: 75px; object-fit: contain; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.1)); }
        .divider { width: 2px; height: 50px; background: #cbd5e1; opacity: 0.7; }
        .vnpt-logo { height: 40px; object-fit: contain; }

        /* --- TYPOGRAPHY FIX --- */
        .header h1 { 
            font-size: 1.5rem;
            margin-bottom: 8px; 
            text-transform: uppercase; 
            font-weight: 900;
            letter-spacing: 0.5px;
            background: linear-gradient(90deg, #0068ff 0%, #1e293b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.6 !important; 
            padding-top: 5px;
            padding-bottom: 5px;
            display: inline-block; 
        }
        
        .header h2 { 
            font-size: 1.6rem; 
            color: var(--danger); 
            text-transform: uppercase; 
            font-weight: 800; 
            margin: 0; 
            text-shadow: 0 2px 10px rgba(239, 68, 68, 0.1);
        }

        /* --- SEARCH BOX --- */
        .search-wrapper { position: sticky; top: 15px; z-index: 90; padding: 0 30px; margin-top: -28px; pointer-events: none; }
        .search-input {
            width: 100%; max-width: 650px; display: block; margin: 0 auto; padding: 16px 30px; 
            border-radius: 50px;
            border: 1px solid rgba(255,255,255,0.8); 
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.15); 
            font-size: 1rem; transition: all 0.3s;
            pointer-events: auto; color: #0f172a; font-weight: 600;
        }
        .search-input:focus { 
            border-color: var(--primary); 
            box-shadow: 0 0 0 5px rgba(0, 104, 255, 0.15), 0 20px 40px -10px rgba(0,0,0,0.2); 
            transform: translateY(-2px);
        }

        /* --- MAIN BUTTONS --- */
        .main-action-box { padding: 50px 40px 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
        
        .card-btn-main {
            display: flex; align-items: center; justify-content: center; gap: 15px;
            padding: 22px; border-radius: 16px; text-decoration: none; color: white;
            font-weight: 800; text-transform: uppercase; font-size: 1.05rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            box-shadow: 0 10px 20px -5px rgba(220, 38, 38, 0.4);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .card-btn-doc {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            box-shadow: 0 10px 20px -5px rgba(5, 150, 105, 0.4);
        }
        .card-btn-main:hover { transform: translateY(-4px) scale(1.01); filter: brightness(1.1); box-shadow: 0 20px 30px -10px rgba(0,0,0,0.3); }

        /* --- CONTENT AREA --- */
        .content-area { padding: 10px 40px; min-height: 200px; }
        #linkGrid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
        
        .department-card {
            background: #ffffff;
            border-radius: 16px; 
            border: 1px solid #d1d5db;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s ease; display: flex; flex-direction: column;
        }
        .department-card:hover { 
            border-color: var(--primary); 
            box-shadow: 0 15px 35px -5px rgba(0, 104, 255, 0.2); 
            transform: translateY(-5px); 
        }

        .card-header { 
            background: #f8fafc;
            padding: 18px 25px; border-bottom: 1px solid #e2e8f0;
            display: flex; align-items: center; gap: 12px; flex-grow: 1; 
        }
        .header-deco { width: 6px; height: 24px; background: var(--danger); border-radius: 4px; box-shadow: 0 2px 4px rgba(239,68,68,0.3); }
        .dept-name { font-size: 1.15rem; font-weight: 800; color: #0f172a; text-transform: uppercase; line-height: 1.3; }

        .card-actions { 
            padding: 25px; 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); 
            gap: 15px; 
            background: transparent; 
        }
        
        .action-btn { 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            padding: 15px 10px; border-radius: 12px; text-decoration: none; 
            transition: all 0.2s; border: 1px solid #f1f5f9; height: 100%; text-align: center; gap: 10px; 
            background: #f8fafc;
            color: #334155;
        }
        .action-btn img { width: 36px; height: 36px; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); }
        .action-btn span { font-size: 0.85rem; font-weight: 700; color: #334155; }
        
        .btn-doc-new:hover { background: #ecfdf5; border-color: #34d399; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(52, 211, 153, 0.2); }
        .btn-zalo-new:hover { background: #eff6ff; border-color: #60a5fa; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(96, 165, 250, 0.2); }
        .btn-req-new:hover { background: #fffbeb; border-color: #fbbf24; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(251, 191, 36, 0.2); }

        .no-result { text-align: center; color: #94a3b8; font-style: italic; margin-top: 20px; display: none; }

        /* --- FOOTER --- */
        .footer-actions { padding: 20px 40px 40px; display: flex; flex-direction: column; gap: 20px; }
        
        .card-btn-secondary {
            display: flex; align-items: center; justify-content: center; gap: 15px;
            padding: 20px; border-radius: 16px; text-decoration: none;
            background: rgba(255,255,255,0.6); 
            color: var(--danger); font-weight: 700;
            border: 2px dashed #fca5a5; transition: 0.3s; text-transform: uppercase; font-size: 0.95rem;
        }
        .card-btn-secondary:hover { background: #fff1f2; border-color: var(--danger); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(239,68,68,0.1); }

        .card-btn-support {
            display: flex; align-items: center; justify-content: center; gap: 15px;
            padding: 22px; border-radius: 16px; cursor: pointer;
            background: #0f172a; color: white; font-weight: 800; text-transform: uppercase;
            box-shadow: 0 10px 20px -5px rgba(15, 23, 42, 0.3);
            transition: all 0.3s; font-size: 1.1rem; border: 1px solid rgba(255,255,255,0.1);
        }
        .card-btn-support:hover {
            transform: translateY(-4px); background: #000; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.4);
        }

        .copyright-footer { text-align: center; padding: 25px; font-size: 0.9rem; color: var(--text-gray); border-top: 1px solid rgba(0,0,0,0.05); background: transparent; }

        .visitor-pill {
            display: inline-flex; align-items: center; justify-content: center; gap: 12px;
            background: #ffffff; padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.05); margin-top: 15px;
            transition: all 0.3s;
        }
        .visitor-pill:hover { transform: translateY(-3px); box-shadow: 0 15px 30px -5px rgba(0, 104, 255, 0.2); border-color: var(--primary); }
        .visitor-label { font-weight: 700; color: #475569; font-size: 0.9rem; display: flex; align-items: center; gap: 8px; }
        .visitor-icon { color: var(--primary); font-size: 1.2rem; }

        /* --- MODAL STYLE --- */
        .modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0;
            width: 100%; height: 100%;
            background-color: rgba(15, 23, 42, 0.75); backdrop-filter: blur(8px);
            animation: fadeIn 0.2s;
        }
        
        .modal-content {
            background-color: #fff; margin: 3% auto; padding: 0;
            width: 95%; max-width: 1000px; height: 90vh;
            border-radius: 20px; box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.5);
            display: flex; flex-direction: column; overflow: hidden;
            animation: slideIn 0.3s;
        }

        .modal-header {
            padding: 25px 35px; background: #fff; border-bottom: 1px solid #f1f5f9;
            display: flex; flex-direction: column; gap: 20px; z-index: 10;
        }
        
        .modal-title-row { display: flex; justify-content: space-between; align-items: center; }
        .modal-title-row h2 { margin: 0; font-size: 1.4rem; font-weight: 800; text-transform: uppercase; color: #0f172a; letter-spacing: -0.5px; }
        
        .close-btn { 
            width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
            border-radius: 12px; background: #f1f5f9; color: #64748b; font-size: 24px; 
            cursor: pointer; transition: 0.2s; 
        }
        .close-btn:hover { background: #fee2e2; color: #ef4444; transform: rotate(90deg); }

        .modal-search {
            width: 100%; padding: 14px 20px 14px 50px; 
            border-radius: 12px; border: 1px solid #cbd5e1;
            font-size: 1rem; color: #334155; transition: 0.2s; background: #f8fafc;
        }
        .modal-search:focus { border-color: var(--primary); background: #fff; box-shadow: 0 0 0 4px rgba(0, 104, 255, 0.1); }
        .search-container { position: relative; width: 100%; }
        .search-icon { position: absolute; left: 18px; top: 50%; transform: translateY(-50%); color: #94a3b8; font-size: 1.3rem; pointer-events: none; }

        .modal-body { padding: 0; overflow-y: auto; flex-grow: 1; }
        
        .support-table { width: 100%; border-collapse: separate; border-spacing: 0; min-width: 800px; }
        .support-table th { 
            background-color: #f8fafc; font-weight: 800; color: #334155; 
            position: sticky; top: 0; z-index: 5; padding: 18px 25px; 
            text-align: left; border-bottom: 2px solid #e2e8f0; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 0.5px;
        }
        .support-table td { padding: 16px 25px; border-bottom: 1px solid #f1f5f9; font-size: 0.95rem; color: #334155; vertical-align: middle; }
        .support-table tr:hover td { background-color: #f0f9ff; }

        .section-header td {
            background-color: #eff6ff; color: #1e40af; font-weight: 900; 
            text-transform: uppercase; padding: 15px 25px; border-bottom: 2px solid #dbeafe; border-top: 1px solid #fff;
        }

        .badge-scope { font-weight: 700; color: #0284c7; background: #e0f2fe; padding: 4px 10px; border-radius: 6px; font-size: 0.85rem; display: inline-block; }
        .user-name { font-weight: 700; color: #0f172a; font-size: 1rem; }
        .phone-link { 
            font-family: 'Inter', monospace; font-weight: 700; color: var(--danger); 
            text-decoration: none; padding: 6px 12px; border-radius: 8px; background: #fef2f2;
            white-space: nowrap; display: inline-block;
        }
        .phone-link:hover { background: var(--danger); color: white; box-shadow: 0 4px 10px rgba(239,68,68,0.2); }

        .modal-body::-webkit-scrollbar { width: 10px; }
        .modal-body::-webkit-scrollbar-track { background: #f1f5f9; }
        .modal-body::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 10px; border: 2px solid #f1f5f9; }
        .modal-body::-webkit-scrollbar-thumb:hover { background-color: #94a3b8; }

        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
        @keyframes slideIn { from {transform: translateY(30px); opacity: 0;} to {transform: translateY(0); opacity: 1;} }

        /* --- MEDIA QUERY --- */
        @media (max-width: 850px) {
            body { padding: 15px 10px; }
            .container { border-radius: 0; border: none; box-shadow: none; background: rgba(255,255,255,0.95); }
            .header h1 { font-size: 1.4rem; }
            .header h2 { font-size: 1.2rem; }
            .main-action-box { grid-template-columns: 1fr; padding: 30px 20px; }
            #linkGrid { grid-template-columns: 1fr; }
            .card-actions { grid-template-columns: 1fr !important; gap: 10px; padding: 15px; }
            .action-btn { flex-direction: row; justify-content: flex-start; padding: 12px 20px; text-align: left; width: 100%; }
            .action-btn img { width: 32px; height: 32px; margin-right: 15px; }
            .modal-content { width: 100%; height: 100%; margin: 0; border-radius: 0; max-height: 100vh; }
        }

        /* --- CHATBOT STYLE --- */
        .chat-widget { position: fixed; bottom: 30px; right: 30px; z-index: 9999; }
        
        /* CSS N√öT CHAT VI√äN THU·ªêC */
        .chat-toggle-btn {
            min-width: 60px; height: 50px; border-radius: 30px;
            background: linear-gradient(135deg, #0068ff 0%, #1e293b 100%);
            border: none; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 104, 255, 0.4);
            transition: all 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            padding: 0 20px;
        }
        .chat-toggle-btn:hover { 
            transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0, 104, 255, 0.5); padding-right: 25px; 
        }
        .chat-toggle-btn img { 
            width: 24px; height: 24px; filter: invert(1); animation: pulse 2s infinite; 
        }
        .chat-btn-text {
            color: white; font-weight: 700; font-size: 0.95rem; text-transform: uppercase; letter-spacing: 0.5px; white-space: nowrap;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        .chat-window {
            position: absolute; bottom: 80px; right: 0;
            width: 350px; height: 500px;
            background: #fff; border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: none; flex-direction: column; overflow: hidden;
            border: 1px solid #e2e8f0;
            animation: slideInUp 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        .chat-header {
            background: #0068ff; color: white; padding: 15px;
            font-weight: 700; display: flex; justify-content: space-between; align-items: center;
        }
        .close-chat { cursor: pointer; font-size: 20px; }
        .chat-messages {
            flex: 1; padding: 15px; overflow-y: auto; background: #f8fafc;
            display: flex; flex-direction: column; gap: 10px;
        }
        .message { max-width: 80%; padding: 10px 15px; border-radius: 15px; font-size: 0.9rem; line-height: 1.4; word-wrap: break-word; }
        .bot-message { background: #e2e8f0; color: #334155; align-self: flex-start; border-bottom-left-radius: 2px; }
        .user-message { background: #0068ff; color: white; align-self: flex-end; border-bottom-right-radius: 2px; }
        .chat-input-area { padding: 10px; border-top: 1px solid #eee; display: flex; gap: 10px; background: #fff; }
        .chat-input-area input { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none; font-family: 'Inter', sans-serif; }
        .chat-input-area button { background: #0068ff; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 480px) { .chat-window { width: 90vw; right: -10px; bottom: 70px; height: 60vh; } }
    </style>
</head>
<body>

<div class="container">
    <header class="header">
        <div class="brand-logos">
            <img src="cchc.png" class="coat-of-arms" alt="Qu·ªëc huy" onerror="this.style.display='none'">
            <div class="divider"></div>
            <img src="logo_cas.svg" class="vnpt-logo" alt="VNPT CAS" onerror="this.style.display='none'">
        </div>
        <h1>C·∫©m nang h·ªó tr·ª£ c√°c H·ªá th·ªëng th√¥ng tin gi·∫£i quy·∫øt TTHC c·∫•p B·ªô ng√†nh</h1>
        <h2>T·ªàNH NINH B√åNH</h2>
    </header>

    <div class="search-wrapper">
        <input type="text" id="searchInput" class="search-input" placeholder="üîç T√¨m ki·∫øm nhanh B·ªô ng√†nh (V√≠ d·ª•: B·ªô Y t·∫ø)...">
    </div>

    <div class="main-action-box">
        <a href="https://dieuphoi.dichvucong.gov.vn" target="_blank" rel="noopener noreferrer" class="card-btn-main">
            <img src="quochuy.png" width="32" onerror="this.src='https://img.icons8.com/color/48/vietnam.png'">
            H·ªá th·ªëng ƒëi·ªÅu ph·ªëi gi·∫£i quy·∫øt TTHC
        </a>
        <a href="https://drive.google.com/drive/folders/1AmPIs4bBpmnxkXBeQDzFFc6PX6szIV-J" target="_blank" rel="noopener noreferrer" class="card-btn-main card-btn-doc">
            <img src="https://img.icons8.com/fluency/48/book.png" width="32">
            T√†i li·ªáu HDSD h·ªá th·ªëng ƒëi·ªÅu ph·ªëi
        </a>
    </div>

    <div class="content-area">
        <div id="linkGrid"></div>
        <div id="noResult" class="no-result">Kh√¥ng t√¨m th·∫•y B·ªô ng√†nh n√†o ph√π h·ª£p.</div>
    </div>

    <div class="footer-actions">
        <a href="https://docs.google.com/spreadsheets/d/1_aixBzdOYSboOhHGMFkx6aHcDpo9YWvN_TCg9bl8-KA/edit?gid=194106651#gid=194106651" target="_blank" rel="noopener noreferrer" class="card-btn-secondary">
            <img src="https://img.icons8.com/fluency/48/list.png" width="28">
            DANH S√ÅCH TTHC C·∫§P T·ªàNH/X√É TRI·ªÇN KHAI T·∫†I C·ªîNG B·ªò NG√ÄNH
        </a>
        
        <div onclick="openSupportModal()" class="card-btn-support">
            <img src="https://img.icons8.com/fluency/48/service.png" width="32">
            ƒê·∫¶U M·ªêI H·ªñ TR·ª¢ 07 B·ªò NG√ÄNH C·ª¶A VNPT NINH B√åNH
        </div>
    </div>

    <footer class="copyright-footer">
        <p>¬© 2026 <strong>ƒê·ªó Vi·ªát Ho√†ng - Trung t√¢m Kinh doanh Gi·∫£i ph√°p - Vi·ªÖn th√¥ng Ninh B√¨nh</strong>.</p>
        
        <div style="text-align: center;">
            <div class="visitor-pill">
                <span class="visitor-label">
                    <span class="visitor-icon">&#128065;</span> L∆∞·ª£t truy c·∫≠p:
                </span>
                <img src="https://visitor-badge.laobi.icu/badge?page_id=hoangitc500.hotrodvc&right_color=0068ff&left_text=&left_color=ffffff&format=true" 
                     alt="Visitor Count" 
                     style="height: 20px; display: block;">
            </div>
        </div>
    </footer>
</div>

<div id="supportModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title-row">
                <h2>ƒê·∫ßu m·ªëi h·ªó tr·ª£ VNPT Ninh B√¨nh</h2>
                <div class="close-btn" onclick="closeSupportModal()">&times;</div>
            </div>
            
            <div class="search-container">
                <span class="search-icon">&#128269;</span>
                <input type="text" id="modalSearchInput" class="modal-search" 
                       placeholder="Nh·∫≠p T√™n, ƒê∆°n v·ªã (VD: S·ªü Y t·∫ø, Hoa L∆∞...) ho·∫∑c SƒêT ƒë·ªÉ t√¨m..." 
                       onkeyup="filterSupportTable()">
            </div>
        </div>
        <div class="modal-body">
            <div class="table-wrapper">
                <table class="support-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">STT</th>
                            <th style="width: 300px;">C∆° quan ph·ª• tr√°ch</th>
                            <th>H·ªç v√† t√™n</th>
                            <th>S·ªë ƒëi·ªán tho·∫°i</th>
                        </tr>
                    </thead>
                    <tbody id="supportTableBody">
                        </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="chat-widget">
    <button id="chatToggle" class="chat-toggle-btn" onclick="toggleChat()">
        <img src="https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg" alt="AI">
        <span class="chat-btn-text">Tr·ª£ l√Ω AI</span>
    </button>
    
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <div style="display: flex; align-items: center; gap: 10px;">
                <img src="https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg" width="24">
                <span>Tr·ª£ l√Ω ·∫£o AI</span>
            </div>
            <span class="close-chat" onclick="toggleChat()">&times;</span>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                Xin ch√†o! T√¥i l√† AI h·ªó tr·ª£ tra c·ª©u th√¥ng tin ƒë·∫ßu m·ªëi v√† t√†i li·ªáu. B·∫°n c·∫ßn t√¨m g√¨ ·∫°?
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="userMsg" placeholder="H·ªèi g√¨ ƒë√≥..." onkeypress="handleEnter(event)">
            <button onclick="sendMessage()">&#10148;</button>
        </div>
    </div>
</div>

<script>
    // --- 1. D·ªÆ LI·ªÜU ƒê·∫¶U M·ªêI H·ªñ TR·ª¢ (CHU·∫®N T·ª™ EXCEL) ---
    // I. DANH S√ÅCH C·∫§P T·ªàNH (S·ªû NG√ÄNH - 2 ng∆∞·ªùi/s·ªü)
    const provincialData = [
        { stt: 1, phamvi: "Trung t√¢m Ph·ª•c v·ª• h√†nh ch√≠nh c√¥ng", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: "", phamvi: "Trung t√¢m Ph·ª•c v·ª• h√†nh ch√≠nh c√¥ng", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: 2, phamvi: "S·ªü Khoa h·ªçc v√† C√¥ng ngh·ªá", ten: "ƒê·ªó Th·ªã Minh Oanh", sdt: "0917525345" },
        { stt: "", phamvi: "S·ªü Khoa h·ªçc v√† C√¥ng ngh·ªá", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 3, phamvi: "S·ªü N·ªôi v·ª•", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: "", phamvi: "S·ªü N·ªôi v·ª•", ten: "Ph·∫°m VƒÉn Thao", sdt: "0947480904" },
        { stt: 4, phamvi: "S·ªü Y t·∫ø", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: "", phamvi: "S·ªü Y t·∫ø", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 5, phamvi: "S·ªü Gi√°o d·ª•c v√† ƒê√†o t·∫°o", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: "", phamvi: "S·ªü Gi√°o d·ª•c v√† ƒê√†o t·∫°o", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 6, phamvi: "S·ªü C√¥ng th∆∞∆°ng", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: "", phamvi: "S·ªü C√¥ng th∆∞∆°ng", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 7, phamvi: "S·ªü X√¢y d·ª±ng", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: "", phamvi: "S·ªü X√¢y d·ª±ng", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 8, phamvi: "S·ªü T√†i nguy√™n v√† M√¥i tr∆∞·ªùng", ten: "T·ªëng VƒÉn Ti·∫øn", sdt: "0911107726" },
        { stt: "", phamvi: "S·ªü T√†i nguy√™n v√† M√¥i tr∆∞·ªùng", ten: "Ph·∫°m ƒêƒÉng Khoa", sdt: "0918576363" }
    ];

    // II. DANH S√ÅCH C·∫§P X√É/PH∆Ø·ªúNG (129 ƒê∆†N V·ªä - CHU·∫®N)
    const communeData = [
        { stt: 1, phamvi: "Ph∆∞·ªùng T√¢y Hoa L∆∞", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: 2, phamvi: "Ph∆∞·ªùng Hoa L∆∞", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: 3, phamvi: "Ph∆∞·ªùng Nam Hoa L∆∞", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: 4, phamvi: "Ph∆∞·ªùng ƒê√¥ng Hoa L∆∞", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: 5, phamvi: "Ph∆∞·ªùng Tam ƒêi·ªáp", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: 6, phamvi: "Ph∆∞·ªùng Y√™n S∆°n", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: 7, phamvi: "Ph∆∞·ªùng Trung S∆°n", ten: "ƒê·ªó Vi·ªát Ho√†ng", sdt: "0916554796" },
        { stt: 8, phamvi: "Ph∆∞·ªùng Y√™n Th·∫Øng", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 9, phamvi: "X√£ Nho Quan", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 10, phamvi: "X√£ Gia L√¢m", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 11, phamvi: "X√£ Gia T∆∞·ªùng", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 12, phamvi: "X√£ Ph√∫ S∆°n", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 13, phamvi: "X√£ C√∫c Ph∆∞∆°ng", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 14, phamvi: "X√£ Ph√∫ Long", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 15, phamvi: "X√£ Thanh S∆°n", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 16, phamvi: "X√£ Qu·ª≥nh L∆∞u", ten: "Ng√¥ VƒÉn Th·ªãnh", sdt: "0888923878" },
        { stt: 17, phamvi: "X√£ Gia Vi·ªÖn", ten: "ƒê·ªó Th·ªã Minh Oanh", sdt: "0917525345" },
        { stt: 18, phamvi: "X√£ ƒê·∫°i Ho√†ng", ten: "ƒê·ªó Th·ªã Minh Oanh", sdt: "0917525345" },
        { stt: 19, phamvi: "X√£ Gia H∆∞ng", ten: "ƒê·ªó Th·ªã Minh Oanh", sdt: "0917525345" },
        { stt: 20, phamvi: "X√£ Gia Phong", ten: "ƒê·ªó Th·ªã Minh Oanh", sdt: "0917525345" },
        { stt: 21, phamvi: "X√£ Gia V√¢n", ten: "ƒê·ªó Th·ªã Minh Oanh", sdt: "0917525345" },
        { stt: 22, phamvi: "X√£ Gia Tr·∫•n", ten: "ƒê·ªó Th·ªã Minh Oanh", sdt: "0917525345" },
        { stt: 23, phamvi: "X√£ Y√™n Kh√°nh", ten: "Ph·∫°m ƒêƒÉng Khoa", sdt: "0918576363" },
        { stt: 24, phamvi: "X√£ Kh√°nh Nh·∫°c", ten: "Ph·∫°m ƒêƒÉng Khoa", sdt: "0918576363" },
        { stt: 25, phamvi: "X√£ Kh√°nh Thi·ªán", ten: "Ph·∫°m ƒêƒÉng Khoa", sdt: "0918576363" },
        { stt: 26, phamvi: "X√£ Kh√°nh H·ªôi", ten: "Ph·∫°m ƒêƒÉng Khoa", sdt: "0918576363" },
        { stt: 27, phamvi: "X√£ Kh√°nh Trung", ten: "Ph·∫°m ƒêƒÉng Khoa", sdt: "0918576363" },
        { stt: 28, phamvi: "X√£ Y√™n M√¥", ten: "T·ªëng VƒÉn Ti·∫øn", sdt: "0911107726" },
        { stt: 29, phamvi: "X√£ Y√™n T·ª´", ten: "T·ªëng VƒÉn Ti·∫øn", sdt: "0911107726" },
        { stt: 30, phamvi: "X√£ Y√™n M·∫°c", ten: "T·ªëng VƒÉn Ti·∫øn", sdt: "0911107726" },
        { stt: 31, phamvi: "X√£ ƒê·ªìng Th√°i", ten: "T·ªëng VƒÉn Ti·∫øn", sdt: "0911107726" },
        { stt: 32, phamvi: "X√£ Ch·∫•t B√¨nh", ten: "Ph·∫°m VƒÉn Thao", sdt: "0911107726" },
        { stt: 33, phamvi: "X√£ Kim S∆°n", ten: "Ph·∫°m VƒÉn Thao", sdt: "0947480904" },
        { stt: 34, phamvi: "X√£ Quang Thi·ªán", ten: "Ph·∫°m VƒÉn Thao", sdt: "0947480904" },
        { stt: 35, phamvi: "X√£ Ph√°t Di·ªám", ten: "Ph·∫°m VƒÉn Thao", sdt: "0947480904" },
        { stt: 36, phamvi: "X√£ Lai Th√†nh", ten: "Ph·∫°m VƒÉn Thao", sdt: "0947480904" },
        { stt: 37, phamvi: "X√£ ƒê·ªãnh H√≥a", ten: "Ph·∫°m VƒÉn Thao", sdt: "0947480904" },
        { stt: 38, phamvi: "X√£ B√¨nh Minh", ten: "Ph·∫°m VƒÉn Thao", sdt: "0947480904" },
        { stt: 39, phamvi: "X√£ Kim ƒê√¥ng", ten: "Ph·∫°m VƒÉn Thao", sdt: "0947480904" },
        { stt: 40, phamvi: "Ph∆∞·ªùng ƒê√¥ng A", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 41, phamvi: "Ph∆∞·ªùng H·ªìng Quang", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 42, phamvi: "Ph∆∞·ªùng M·ªπ L·ªôc", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 43, phamvi: "Ph∆∞·ªùng Nam ƒê·ªãnh", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 44, phamvi: "Ph∆∞·ªùng Th√†nh Nam", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 45, phamvi: "Ph∆∞·ªùng Thi√™n Tr∆∞·ªùng", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 46, phamvi: "Ph∆∞·ªùng Tr∆∞·ªùng Thi", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 47, phamvi: "Ph∆∞·ªùng V·ªã Kh√™", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 48, phamvi: "X√£ V·ª• B·∫£n", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 49, phamvi: "X√£ C·ªï L·ªÖ", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 50, phamvi: "X√£ Nam H·ªìng", ten: "Nguy·ªÖn Th·ªã L√Ω", sdt: "0949073694" },
        { stt: 51, phamvi: "X√£ ƒê·ªìng Th·ªãnh", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 52, phamvi: "X√£ Giao B√¨nh", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 53, phamvi: "X√£ Giao H√≤a", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 54, phamvi: "X√£ Giao H∆∞ng", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 55, phamvi: "X√£ Giao Minh", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 56, phamvi: "X√£ Giao Ninh", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 57, phamvi: "X√£ Giao Ph√∫c", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 58, phamvi: "X√£ Giao Th·ªßy", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 59, phamvi: "X√£ H·∫£i An", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 60, phamvi: "X√£ H·∫£i Anh", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 61, phamvi: "X√£ H·∫£i H·∫≠u", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 62, phamvi: "X√£ H·∫£i H∆∞ng", ten: "V≈© VƒÉn ƒêam", sdt: "0911741555" },
        { stt: 63, phamvi: "X√£ H·∫£i Quang", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 64, phamvi: "X√£ H·∫£i Th·ªãnh", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 65, phamvi: "X√£ H·∫£i Ti·∫øn", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 66, phamvi: "X√£ H·∫£i Xu√¢n", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 67, phamvi: "X√£ Hi·ªÉn Kh√°nh", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 68, phamvi: "X√£ H·ªìng Phong", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 69, phamvi: "X√£ Li√™n Minh", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 70, phamvi: "X√£ Minh T√¢n", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 71, phamvi: "X√£ Minh Th√°i", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 72, phamvi: "X√£ Nam ƒê·ªìng", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 73, phamvi: "X√£ Nam Minh", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 74, phamvi: "X√£ Nam Ninh", ten: "ƒê·ªó Trung T√≠n", sdt: "0948522828" },
        { stt: 75, phamvi: "X√£ Nam Tr·ª±c", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 76, phamvi: "X√£ Nghƒ©a H∆∞ng", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 77, phamvi: "X√£ Nghƒ©a L√¢m", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 78, phamvi: "X√£ Nghƒ©a S∆°n", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 79, phamvi: "X√£ Ninh C∆∞·ªùng", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 80, phamvi: "X√£ Ninh Giang", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 81, phamvi: "X√£ Phong Doanh", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 82, phamvi: "X√£ Quang H∆∞ng", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 83, phamvi: "X√£ Qu·ªπ Nh·∫•t", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 84, phamvi: "X√£ R·∫°ng ƒê√¥ng", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 85, phamvi: "X√£ T√¢n Minh", ten: "Nguy·ªÖn H·ªìng Vi·ªát", sdt: "0915673768" },
        { stt: 86, phamvi: "X√£ Tr·ª±c Ninh", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 87, phamvi: "X√£ V·∫°n Th·∫Øng", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 88, phamvi: "X√£ C√°t Th√†nh", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 89, phamvi: "X√£ V≈© D∆∞∆°ng", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 90, phamvi: "X√£ Xu√¢n Giang", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 91, phamvi: "X√£ Xu√¢n H·ªìng", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 92, phamvi: "X√£ Xu√¢n H∆∞ng", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 93, phamvi: "X√£ Xu√¢n Tr∆∞·ªùng", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 94, phamvi: "X√£ √ù Y√™n", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 95, phamvi: "X√£ Y√™n C∆∞·ªùng", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 96, phamvi: "X√£ Y√™n ƒê·ªìng", ten: "L√™ Cao C∆∞·ªùng", sdt: "0888932199" },
        { stt: 97, phamvi: "UBND Ph∆∞·ªùng Ti√™n S∆°n", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 98, phamvi: "UBND X√£ Thanh L√¢m", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 99, phamvi: "UBND X√£ L√Ω Nh√¢n", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 100, phamvi: "UBND Ph∆∞·ªùng Duy H√†", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 101, phamvi: "UBND X√£ Thanh B√¨nh", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 102, phamvi: "UBND Ph∆∞·ªùng Kim Thanh", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 103, phamvi: "UBND X√£ Nam Xang", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 104, phamvi: "UBND X√£ T√¢n Thanh", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 105, phamvi: "UBND X√£ B√¨nh Giang", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 106, phamvi: "UBND X√£ B√¨nh L·ª•c", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 107, phamvi: "UBND Ph∆∞·ªùng Duy Ti√™n", ten: "Nguy·ªÖn Th√°i Phong", sdt: "0844272727" },
        { stt: 108, phamvi: "UBND Ph∆∞·ªùng L√Ω Th∆∞·ªùng Ki·ªát", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 109, phamvi: "UBND X√£ Nam L√Ω", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 110, phamvi: "UBND Ph∆∞·ªùng Ph√π V√¢n", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 111, phamvi: "UBND Ph∆∞·ªùng H√† Nam", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 112, phamvi: "UBND X√£ Thanh Li√™m", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 113, phamvi: "UBND Ph∆∞·ªùng Li√™m Tuy·ªÅn", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 114, phamvi: "UBND Ph∆∞·ªùng Ch√¢u S∆°n", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 115, phamvi: "UBND Ph∆∞·ªùng Tam Ch√∫c", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 116, phamvi: "UBND X√£ B·∫Øc L√Ω", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 117, phamvi: "UBND X√£ B√¨nh S∆°n", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 118, phamvi: "UBND Ph∆∞·ªùng Ph·ªß L√Ω", ten: "Nguy·ªÖn Th·ªã Ng√¢n", sdt: "0913289959" },
        { stt: 119, phamvi: "UBND Ph∆∞·ªùng ƒê·ªìng VƒÉn", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 120, phamvi: "UBND Ph∆∞·ªùng Kim B·∫£ng", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 121, phamvi: "UBND Ph∆∞·ªùng L√™ H·ªì", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 122, phamvi: "UBND X√£ B√¨nh An", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 123, phamvi: "UBND Ph∆∞·ªùng Nguy·ªÖn U√Ω", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 124, phamvi: "UBND X√£ B√¨nh M·ªπ", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 125, phamvi: "UBND X√£ Li√™m H√†", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 126, phamvi: "UBND X√£ Vƒ©nh Tr·ª•", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 127, phamvi: "UBND X√£ Tr·∫ßn Th∆∞∆°ng", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 128, phamvi: "UBND X√£ Nh√¢n H√†", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" },
        { stt: 129, phamvi: "UBND Ph∆∞·ªùng Duy T√¢n", ten: "Nguy·ªÖn Th·ªã Xu√¢n", sdt: "0888000328" }
    ];

    // --- 2. LOGIC MODAL & T√åM KI·∫æM ---
    const modal = document.getElementById("supportModal");
    const tableBody = document.getElementById("supportTableBody");
    const modalSearchInput = document.getElementById("modalSearchInput");

    function openSupportModal() {
        renderTable(provincialData, communeData); // M·∫∑c ƒë·ªãnh render h·∫øt
        modalSearchInput.value = "";
        modal.style.display = "block";
        document.body.style.overflow = "hidden"; // Kh√≥a cu·ªôn trang ch√≠nh
        setTimeout(() => modalSearchInput.focus(), 100);
    }

    function closeSupportModal() {
        modal.style.display = "none";
        document.body.style.overflow = "auto";
    }

    // Render b·∫£ng c√≥ ph√¢n t√°ch 2 kh·ªëi
    function renderTable(province, commune) {
        tableBody.innerHTML = "";
        
        // Render Kh·ªëi S·ªü Ng√†nh
        if (province.length > 0) {
            const header1 = document.createElement("tr");
            header1.className = "section-header";
            header1.innerHTML = `<td colspan="4">I. KH·ªêI S·ªû BAN NG√ÄNH (C·∫§P T·ªàNH)</td>`;
            tableBody.appendChild(header1);

            province.forEach(item => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td style="text-align: center; color: #64748b;">${item.stt}</td>
                    <td><span class="badge-scope">${item.phamvi}</span></td>
                    <td class="user-name">${item.ten}</td>
                    <td><a href="tel:${item.sdt}" class="phone-link">${item.sdt}</a></td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Render Kh·ªëi X√£ Ph∆∞·ªùng
        if (commune.length > 0) {
            const header2 = document.createElement("tr");
            header2.className = "section-header";
            header2.innerHTML = `<td colspan="4">II. KH·ªêI X√É/PH∆Ø·ªúNG (129 ƒê∆†N V·ªä)</td>`;
            tableBody.appendChild(header2);

            commune.forEach(item => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td style="text-align: center; color: #64748b;">${item.stt}</td>
                    <td><span class="badge-scope">${item.phamvi}</span></td>
                    <td class="user-name">${item.ten}</td>
                    <td><a href="tel:${item.sdt}" class="phone-link">${item.sdt}</a></td>
                `;
                tableBody.appendChild(row);
            });
        }

        if (province.length === 0 && commune.length === 0) {
            tableBody.innerHTML = `<tr><td colspan="4" style="text-align:center; padding: 30px; color:#94a3b8;">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£</td></tr>`;
        }
    }

    // T√¨m ki·∫øm (L·ªçc c·∫£ 2 danh s√°ch)
    function filterSupportTable() {
        const keyword = modalSearchInput.value.toLowerCase().trim();
        
        const filteredProvince = provincialData.filter(item => 
            item.phamvi.toLowerCase().includes(keyword) || 
            item.ten.toLowerCase().includes(keyword) || 
            item.sdt.includes(keyword)
        );

        const filteredCommune = communeData.filter(item => 
            item.phamvi.toLowerCase().includes(keyword) || 
            item.ten.toLowerCase().includes(keyword) || 
            item.sdt.includes(keyword)
        );

        renderTable(filteredProvince, filteredCommune);
    }

    window.onclick = function(event) {
        if (event.target == modal) closeSupportModal();
    }

    // --- 3. DANH S√ÅCH B·ªò NG√ÄNH CH√çNH ---
    const config = [
        {
            name: "B·ªô N√¥ng nghi·ªáp v√† M√¥i tr∆∞·ªùng", 
            zalo: "https://zalo.me/g/zwqtnk714",
            request: "https://forms.gle/FKAbim7xTrBDiHuU9",
            doc: "https://drive.google.com/drive/mobile/folders/1Y6EM__Zi_j1ypErH2wHn8df2txSPSLJB"
        },
        {
            name: "B·ªô Gi√°o d·ª•c v√† ƒê√†o t·∫°o",
            zalo: "https://zalo.me/g/lequfi377",
            request: "https://forms.gle/gTXS4hQHmFvquAxF8",
            doc: "https://drive.google.com/drive/mobile/folders/1IUsYnmNbYNixJzwoMmkkhZc_DQAkfI9f"
        },
        {
            name: "B·ªô C√¥ng Th∆∞∆°ng",
            zalo: "https://zalo.me/g/jjsdtc222",
            request: "https://forms.gle/w3C2LnRoLFbBowbi6",
            doc: "https://drive.google.com/drive/folders/1wu4tSrAmbxt0ITQSF-0HApnZxjjFzgeB"
        },
        {
            name: "B·ªô X√¢y d·ª±ng",
            zalo: "https://zalo.me/g/tnfjxs703",
            request: "https://forms.gle/HcUJcZTBNqs6wJnw7",
            doc: "https://drive.google.com/drive/folders/16oWLLemMDbB8NRpxCQ6GpkMg-EpnNbJd"
        },
        {
            name: "B·ªô N·ªôi v·ª•",
            zalo: "https://zalo.me/g/izahnx601",
            request: "https://forms.gle/hsUi5c3v2U5jMgT8A",
            doc: "https://drive.google.com/drive/mobile/folders/1cm3H_7O6QHeeztj1FZm8tKQqBgEvqbea"
        },
        {
            name: "B·ªô Y t·∫ø",
            zalo: "https://zalo.me/g/gelmej477",
            request: "https://forms.gle/GbLmjmhGCrGKfWmW7",
            doc: "https://drive.google.com/drive/mobile/folders/1LK-0VbaytXhOKOC9Z5DhYjVAywITZ7Xt"
        },
        {
            name: "B·ªô Khoa h·ªçc v√† C√¥ng ngh·ªá",
            zalo: "https://zalo.me/g/tsopxh923",
            request: "https://forms.gle/6es1UVB2puWZxVED7",
            doc: "https://drive.google.com/drive/folders/11l2k8RRawEgPaDPeSjVQ62qHMfI6QTW6"
        }
    ];

    const grid = document.getElementById('linkGrid');
    const searchInput = document.getElementById('searchInput');
    const noResultMsg = document.getElementById('noResult');

    function renderCards(data) {
        grid.innerHTML = '';
        if (data.length === 0) {
            noResultMsg.style.display = 'block';
        } else {
            noResultMsg.style.display = 'none';
            data.forEach(dept => {
                const zaloBtn = dept.zalo ? 
                    `<a href="${dept.zalo}" class="action-btn btn-zalo-new" target="_blank" rel="noopener noreferrer">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Icon_of_Zalo.svg">
                        <span>Nh√≥m Zalo h·ªó tr·ª£</span>
                    </a>` : '';
                const row = document.createElement('div');
                row.className = 'department-card';
                row.innerHTML = `
                    <div class="card-header">
                        <div class="header-deco"></div>
                        <div class="dept-name">${dept.name}</div>
                    </div>
                    <div class="card-actions">
                        <a href="${dept.doc}" class="action-btn btn-doc-new" target="_blank" rel="noopener noreferrer">
                            <img src="https://img.icons8.com/fluency/48/reading-ebook.png">
                            <span>T√†i li·ªáu HDSD</span>
                        </a>
                        ${zaloBtn}
                        <a href="${dept.request}" class="action-btn btn-req-new" target="_blank" rel="noopener noreferrer">
                            <img src="https://img.icons8.com/fluency/48/sent.png">
                            <span>G·ª≠i y√™u c·∫ßu h·ªó tr·ª£</span>
                        </a>
                    </div>
                `;
                grid.appendChild(row);
            });
        }
    }

    renderCards(config);

    searchInput.addEventListener('input', (e) => {
        const keyword = e.target.value.toLowerCase().trim();
        const filtered = config.filter(item => item.name.toLowerCase().includes(keyword));
        renderCards(filtered);
    });

    // --- 4. CHATBOT GEMINI INTEGRATION (B·∫¢N FIX L·ªñI 404 & QUOTA) ---
    const API_KEY = "AIzaSyACgFcP_GufhJa_3x0-OKmttdkSPbf_tVw"; 
    
    // S·ª¨ D·ª§NG DUY NH·∫§T 1 MODEL CHU·∫®N ƒê√É ƒê∆Ø·ª¢C X√ÅC NH·∫¨N C√ì TRONG DANH S√ÅCH
    const MODEL_NAME = "gemini-2.5-flash"; 
    const API_VERSION = "v1beta";
    const API_URL = `https://generativelanguage.googleapis.com/${API_VERSION}/models/${MODEL_NAME}:generateContent?key=${API_KEY}`;

    function getSystemContext() {
        let context = "B·∫°n l√† nh√¢n vi√™n h·ªó tr·ª£. H√£y tr·∫£ l·ªùi ng·∫Øn g·ªçn, ch√≠nh x√°c b·∫±ng ti·∫øng Vi·ªát d·ª±a tr√™n d·ªØ li·ªáu sau ƒë√¢y:\n\n";
        
        context += "1. TH√îNG TIN B·ªò NG√ÄNH:\n";
        config.forEach(c => {
            context += `- ${c.name}: T√†i li·ªáu (${c.doc}), Nh√≥m Zalo (${c.zalo || 'Kh√¥ng c√≥'}), Form h·ªó tr·ª£ (${c.request})\n`;
        });

        context += "\n2. ƒê·∫¶U M·ªêI C·∫§P T·ªàNH (S·ªû NG√ÄNH):\n";
        provincialData.forEach(p => {
            if(p.ten) context += `- ƒê∆°n v·ªã: ${p.phamvi}, Ng∆∞·ªùi ph·ª• tr√°ch: ${p.ten}, SƒêT: ${p.sdt}\n`;
        });

        context += "\n3. ƒê·∫¶U M·ªêI C·∫§P X√É/PH∆Ø·ªúNG:\n";
        communeData.forEach(c => {
            if(c.ten) context += `- ƒê∆°n v·ªã: ${c.phamvi}, Ng∆∞·ªùi ph·ª• tr√°ch: ${c.ten}, SƒêT: ${c.sdt}\n`;
        });
        
        context += "\nQUY T·∫ÆC: N·∫øu ng∆∞·ªùi d√πng h·ªèi s·ªë ƒëi·ªán tho·∫°i ho·∫∑c ng∆∞·ªùi ph·ª• tr√°ch, h√£y t√¨m ch√≠nh x√°c trong danh s√°ch tr√™n. N·∫øu kh√¥ng th·∫•y, h√£y b·∫£o h·ªç l√† kh√¥ng t√¨m th·∫•y th√¥ng tin.";
        return context;
    }

    const chatWindow = document.getElementById('chatWindow');
    const chatMessages = document.getElementById('chatMessages');
    const userMsgInput = document.getElementById('userMsg');

    function toggleChat() {
        chatWindow.style.display = chatWindow.style.display === 'flex' ? 'none' : 'flex';
        if(chatWindow.style.display === 'flex') userMsgInput.focus();
    }

    function handleEnter(e) {
        if (e.key === 'Enter') sendMessage();
    }

    function appendMessage(text, sender) {
        const div = document.createElement('div');
        div.className = `message ${sender}-message`;
        div.innerHTML = text.replace(/\n/g, '<br>').replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank" style="color:white;text-decoration:underline;">$1</a>');
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    async function sendMessage() {
        const text = userMsgInput.value.trim();
        if (!text) return;

        appendMessage(text, 'user');
        userMsgInput.value = '';
        
        const loadingId = 'loading-' + Date.now();
        const loadingDiv = document.createElement('div');
        loadingDiv.className = 'message bot-message';
        loadingDiv.id = loadingId;
        loadingDiv.innerText = 'ƒêang tra c·ª©u...';
        chatMessages.appendChild(loadingDiv);

        try {
            console.log("ƒêang g·ª≠i y√™u c·∫ßu t·ªõi:", API_URL); // Debug log
            
            const response = await fetch(API_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [
                        {
                            role: "user",
                            parts: [
                                { text: getSystemContext() },
                                { text: "C√¢u h·ªèi c·ªßa ng∆∞·ªùi d√πng: " + text }
                            ]
                        }
                    ]
                })
            });

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                console.error("API Error Response:", errorData); // Log l·ªói chi ti·∫øt ra console
                
                let errorMessage = errorData.error?.message || `L·ªói HTTP ${response.status}`;
                throw new Error(errorMessage);
            }

            const data = await response.json();
            const botReply = data.candidates[0].content.parts[0].text;
            
            document.getElementById(loadingId).remove();
            
            const formattedReply = botReply.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank" style="color:#0068ff;">$1</a>');
            const div = document.createElement('div');
            div.className = `message bot-message`;
            div.innerHTML = formattedReply.replace(/\n/g, '<br>');
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;

        } catch (error) {
            document.getElementById(loadingId).remove();
            // HI·ªÇN TH·ªä L·ªñI CHI TI·∫æT RA KHUNG CHAT ƒê·ªÇ B·∫†N BI·∫æT NGUY√äN NH√ÇN
            appendMessage(`‚ö†Ô∏è L·ªói: ${error.message}<br><br>üëâ G·ª£i √Ω: H√£y th·ª≠ t·∫Øt gi·ªõi h·∫°n t√™n mi·ªÅn (Restrictions) c·ªßa API Key n·∫øu b·∫°n ƒëang ch·∫°y tr√™n localhost.`, 'bot');
            console.error("Gemini Critical Error:", error);
        }
    }
</script>

</body>
</html>